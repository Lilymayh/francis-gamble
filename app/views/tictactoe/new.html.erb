<!DOCTYPE html>
<html>
  <head>

    <title>Tic Tac Toe</title>

    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag 'tictactoe', media: 'all', 'data-turbolinks-track': 'reload' %>

  </head>

  <div>
    <h1 class="s">Start</h1>
<%= render 'partials/header' %>

<h2>Tic Tac Toe</h2>
<h3>Place your bet to start the game!</h3>

<%= form_with(model: @tictactoe, url: start_tictactoe_index_path, local: true) do |form| %>
  <%= form.hidden_field :board, value: Array.new(9, nil).to_json %>
  <%= form.hidden_field :amount, id: "bet_amount" %>
  <%= hidden_field_tag :authenticity_token, form_authenticity_token %>

        <%= form.submit "Start Game" %>

    <button type="button" class="subtract-balance-button" onclick="updateBetAndSubmit(10);">Bet 10 Tokens</button>

    <button type="button" class="subtract-balance-button" onclick="updateBetAndSubmit(20);">Bet 20 Tokens</button>

    <button type="button" class="subtract-balance-button" onclick="updateBetAndSubmit(50);">Get 50 Tokens</button>
    
  </div>
<% end %>

<%= link_to 'Back', tictactoe_index_path %>

<script>
  function updateBetAndSubmit(amount) {
    document.getElementById('bet_amount').value = amount;
    document.querySelector('form').submit();
  }
</script>




